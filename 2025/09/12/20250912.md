```sh
#!/bin/bash


# Print usage message
usage() {
    echo "Usage: touchdaily TITLE" >&2
    exit 1
}

echo $0
echo $1
echo $#

if [[ $# -gt 1 ]]; then
    usage
fi

bindir=$(dirname $0)
echo $bindir
clidir=$(dirname $bindir)
echo $clidir
envdir="$clidir/env"
echo $envdir
envfile="$(dirname $(dirname $0))/env/.env"
echo $envfile

if [[ -f $envfile ]]; then
    echo "-f envfile"
    ls -l $envfile
else
    echo "! -f envfile"
fi


```



---
layout: post
title: post title
subtitle: post subtitle
tags: [tag]
comments: true
author: widehyo
---


```sh
~/.cli $ !!
touchdaily
input title: vim_terminal_api
input subtitle:
input tags: vim,shell
vim_terminal_api
default_subtitle
[vim,shell]
/home/widehyo/gitclone/widehyo1.github.io/_posts/daily/2025-09-12-vim_terminal_api.md
---
layout: post
title: vim_terminal_api
subtitle:
tags: [vim,shell]
comments: true
author: widehyo
---
~/.cli $ cat ~/.cli/bin/touchdaily
#!/bin/bash

envfile="$(dirname $(dirname $0))/env/.env"
if [[ -f $envfile ]]; then
    source $envfile
else
    echo "$envfile does not exist" >&2
    exit 1
fi

# Print usage message
usage() {
    echo "Usage: touchdaily TITLE" >&2
    exit 1
}

# posttitle="$TODAYPOST-$1.md"
# echo $posttitle
# read -r
# ---<CR>layout: post<CR>title: post title<CR>subtitle: post subtitle<CR>tags: [tag]<CR>comments: true<CR>author: widehyo<CR>---

read -r -p "input title: " title
read -r -p "input subtitle: " subtitle
read -r -p "input tags: " tags

echo ${title:-default_title}
echo ${subtitle:-default_subtitle}
tags=${tags:-}
echo "[$tags]"

posttitle="$TODAYPOST-$title.md"

echo $posttitle
cat <<EOF
---
layout: post
title: $title
subtitle: $subtitle
tags: [$tags]
comments: true
author: widehyo
---
EOF
```

/home/widehyo/gitclone/widehyo1.github.io/_posts




function! OpenTerminal()
  for listed_buffer in filter(getbufinfo(), 'v:val.listed')
    let bufnr = listed_buffer.bufnr
    let buftype = getbufvar(bufnr, '&buftype')
    let buftype = (buftype == '' ? 'normal' : buftype)
    if buftype == 'terminal'
      execute 'buffer! ' .. bufnr
      " sync pwd
      return
    endif
  endfor

  execute 'terminal! ++curwin'
endfunction



function M.open_terminal()
  local buffers = vim.api.nvim_list_bufs()
  
  for _, buf in ipairs(buffers) do
    -- 버퍼가 유효하고 터미널 타입인지 확인
    if vim.api.nvim_buf_is_valid(buf) and vim.api.nvim_buf_get_option(buf, 'buftype') == 'terminal' then
      vim.cmd('buffer! ' .. buf)

      local job_id = vim.b[buf].terminal_job_id
      if job_id and vim.fn.jobwait({job_id}, 0)[1] == -1 then
        vim.fn.chansend(job_id, 'cd ' .. vim.fn.fnameescape(vim.fn.getcwd()) .. '\n')
      end
      return
    end
  end
  
  vim.fn.execute('terminal')
end
